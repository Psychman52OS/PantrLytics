:root{
  --bg: #0b0b0d;
  --card: #1b1d22;
  --text: #e5e7eb;
  --muted: #9aa0a6;
  --link: #f97316;
  --border: #2a2f36;
  --btn-bg: #262a31;
  --btn-border: rgba(255,255,255,0.08);
  --input-bg: #171a1f;
  --input-border: var(--btn-border);
  --input-text: var(--text);
  --radius: 14px;
  --shadow: 0 8px 24px rgba(0,0,0,.25);

  /* Extra accents for nicer buttons / modal */
  --accent: #f97316;
  --accent-soft: color-mix(in oklab, var(--accent), transparent 80%);
  --danger: #ef4444;
  --danger-soft: color-mix(in oklab, var(--danger), transparent 82%);
}

:root[data-theme="light"]{
  --bg: #f7f8fb;
  --card: #ffffff;
  --text: #0f172a;
  --muted: #475569;
  --link: #d97706;
  --border: #d6dae3;
  --btn-bg: #f4f5fa;
  --btn-border: #d6dae3;
  --input-bg: #ffffff;
  --input-border: #d6dae3;
  --input-text: #0f172a;
  --radius: 14px;
  --shadow: 0 8px 24px rgba(0,0,0,.12);
  --accent: #d97706;
  --accent-soft: color-mix(in oklab, var(--accent), transparent 80%);
  --danger: #dc2626;
  --danger-soft: color-mix(in oklab, var(--danger), transparent 82%);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* links */
a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }

.container { width: 100%; max-width: 1100px; margin: 0 auto; padding: 16px; }

/* -------------------------
   Header / nav
-------------------------- */
.app-header {
  position: sticky;
  top: 0;
  z-index: 2;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
  background: color-mix(in oklab, var(--bg), transparent 12%);
  border-bottom: 1px solid var(--border);
}
.app-header .container {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.app-title {
  font-size: 18px;
  margin: 0;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}
.app-title a { text-decoration: none; color: var(--text); }
.app-title a:hover { color: var(--accent); }

.nav {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 2px;
}
.nav a {
  color: var(--muted);
  text-decoration: none;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid transparent;
  font-size: 12px;
}
.nav a:hover {
  color: var(--text);
  border-color: color-mix(in oklab, var(--border), white 20%);
}

/* -------------------------
   Page header (title row)
-------------------------- */
.page-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 16px;
}
.page-header-text {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.page-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
}
.page-subtitle {
  margin: 0;
  font-size: 13px;
  color: var(--muted);
}
.page-header-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* -------------------------
   Cards / content
-------------------------- */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
}
.card-title { margin: 0 0 8px; font-size: 16px; }

/* -------------------------
   Forms / inputs
-------------------------- */
.search-row {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}
.field { display: grid; gap: 6px; }
.field--full { grid-column: 1 / -1; }

.input {
  width: 100%;
  padding: 10px 12px;
  background: var(--input-bg);
  color: var(--input-text);
  border: 1px solid var(--input-border);
  border-radius: 10px;
  outline: none;
}
.input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent-soft);
}
.field.field-error .input,
.field.field-error select.input,
.field.field-error textarea.input {
  border-color: var(--danger);
  box-shadow: 0 0 0 1px var(--danger-soft);
}
.field-error-message {
  font-size: 11px;
  color: var(--danger);
}
/* Ensure <select> fields styled like .input match the size of text inputs */
select.input {
  background: var(--input-bg);
  color: var(--input-text);
  border: 1px solid var(--input-border);
  border-radius: 10px;
  padding: 10px 12px;
  /* Force consistent height to match other fields */
  height: 40px;
  line-height: 1.4;
}

/* -------------------------
   Buttons
-------------------------- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--btn-bg);
  color: var(--text);
  border: 1px solid var(--btn-border);
  border-radius: 999px;
  text-decoration: none;
  cursor: pointer;
  line-height: 1.1;
  font-size: 13px;
  white-space: nowrap;
}
button.btn { -webkit-appearance: none; appearance: none; }
.btn:hover { border-color: var(--link); }
.btn:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--link), white 20%);
  outline-offset: 2px;
}
.btn-small { padding: 6px 10px; font-size: 12px; }

/* variants */
.btn-secondary {
  background: transparent;
}

.btn-ghost {
  background: transparent;
  border-color: transparent;
}
.btn-ghost:hover {
  border-color: var(--btn-border);
}

/* primary (for New Item / Save) */
.btn-primary {
  background: var(--accent);
  border-color: var(--accent);
  color: #0e0e10;
  font-weight: 600;
}
.btn-primary:hover {
  background: color-mix(in oklab, var(--accent), white 8%);
}

/* accent (for Edit) */
.btn-accent {
  background: var(--accent-soft);
  border-color: var(--accent);
  color: var(--accent);
}
.btn-accent:hover {
  background: color-mix(in oklab, var(--accent-soft), var(--accent) 20%);
}

/* danger (for Delete) */
.btn-danger {
  background: var(--danger-soft);
  border-color: var(--danger);
  color: var(--danger);
}
.btn-danger:hover {
  background: color-mix(in oklab, var(--danger-soft), var(--danger) 20%);
}

.btn:disabled { opacity:.55; cursor:not-allowed; }

.btn-group { display: inline-flex; gap: 6px; flex-wrap: wrap; }
.table .btn-group .btn { height: 28px; padding: 4px 10px; }

.actions {
  margin-top: 12px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* icon helper */
.btn-icon-left {
  font-size: 14px;
  line-height: 1;
}

/* -------------------------
   Text helpers / links
-------------------------- */
.link { color: var(--link); text-decoration: none; }
.link:hover { text-decoration: underline; }
.muted { color: var(--muted); }

.link-serial {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  color: var(--text);
}
.name-link {
  font-weight: 700;
  color: var(--link);
}
:root[data-theme="light"] .name-link {
  color: var(--accent);
}
.name-link:hover { text-decoration: underline; }

/* -------------------------
   Tables
-------------------------- */
.table-wrap {
  overflow: auto;
  border-radius: var(--radius);
  border: 1px solid var(--border);
}
.table {
  width: 100%;
  border-collapse: collapse;
  min-width: 640px;
}
.table th, .table td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}
.table th {
  position: relative;
  text-align: center;
  color: var(--muted);
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}
.table th .col-resize-handle {
  position: absolute;
  top: 0;
  right: -4px;
  width: 8px;
  height: 100%;
  cursor: col-resize;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}
.table th .col-resize-handle::after {
  content: "";
  width: 2px;
  height: 60%;
  background: color-mix(in oklab, var(--muted), transparent 20%);
  border-radius: 2px;
  opacity: 0;
  transition: opacity 0.12s ease;
}
.table th:hover .col-resize-handle::after,
.table th .col-resize-handle:focus-visible::after {
  opacity: 0.7;
}
.is-resizing,
.is-resizing * {
  cursor: col-resize !important;
}
.table tr:hover td {
  background: color-mix(in oklab, var(--card), #fff 2%);
}
.table td.right, .table th.right { text-align: right; }

/* inventory-specific tweaks */
.table-inventory .col-name {
  min-width: 160px;
}
.table-inventory .col-actions {
  width: 1%;
  white-space: nowrap;
}
.table-inventory td.col-quantity,
.table-inventory th[data-sort-index="3"] {
  text-align: center;
}
.qty-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.qty-inline form {
  display: inline;
  margin: 0;
}
.qty-inline .qty-value {
  min-width: 26px;
  text-align: center;
  font-weight: 600;
}
.qty-btn {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--btn-border);
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  color: var(--text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease, border-color 0.15s ease;
}
.qty-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 12px rgba(0,0,0,0.08); }
.qty-btn:active { transform: translateY(0); box-shadow: none; }
.qty-btn.inc {
  border-color: #51cf66;
  background: color-mix(in oklab, #37b24d 28%, var(--card) 72%);
  color: #0f2917;
}
.qty-btn.inc:hover { border-color: #2f9e44; background: color-mix(in oklab, #2f9e44 36%, var(--card) 64%); }
.qty-btn.dec {
  border-color: #ff6b6b;
  background: color-mix(in oklab, #fa5252 30%, var(--card) 70%);
  color: #2d0b0b;
}
.qty-btn.dec:hover { border-color: #f03e3e; background: color-mix(in oklab, #f03e3e 36%, var(--card) 64%); }

/* -------------------------
   Detail layout
-------------------------- */
.detail-grid {
  display: grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 16px;
}
.kv { display: grid; gap: 6px; }
.kv > div {
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: 10px;
}
.code {
  background: color-mix(in oklab, var(--card), var(--bg) 25%);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  padding: 2px 6px;
  color: var(--text);
}
.media {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}
.media img { display: block; width: 100%; height: auto; }

/* Bigger, more prominent item name on the show page */
.item-title {
  font-size: 22px;
  font-weight: 650;
}

/* Key/value layout: bold label, normal value */
.kv-label {
  font-weight: 600;
  color: var(--muted);
}
.kv-value {
  font-weight: 400;
}

/* Right-side photo card on the detail view */
.detail-photo-card {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px;
  background: color-mix(in oklab, var(--card), var(--bg) 15%);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.detail-photo-header {
  font-size: 13px;
}

.detail-photo-card img {
  display: block;
  width: 100%;
  max-height: 260px;
  border-radius: 10px;
  object-fit: cover; /* crop rather than squish if aspect ratio is wild */
}

.thumb-row {
  display: flex;
  gap: 8px;
  margin-top: 6px;
  flex-wrap: wrap;
}
.thumb-row .thumb,
.photo-grid .thumb {
  display: block;
  width: 64px;
  height: 64px;
  border: 1px solid var(--border);
  border-radius: 8px;
  overflow: hidden;
  background: var(--card);
}
.thumb-row img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.photo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
  gap: 8px;
}
.photo-grid .thumb {
  position: relative;
  width: 100%;
  height: 96px;
  transition: transform 0.12s ease, border-color 0.12s ease, box-shadow 0.12s ease;
}
.photo-grid .thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.photo-grid .thumb-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: color-mix(in oklab, #000, transparent 55%);
  color: #fff;
  font-size: 12px;
  opacity: 0;
  transition: opacity 0.12s ease;
  pointer-events: none;
}
.photo-grid .thumb:hover,
.photo-grid .thumb:focus-visible {
  border-color: var(--accent);
  box-shadow: 0 6px 14px rgba(0,0,0,0.35);
  transform: translateY(-1px) scale(1.01);
}
.photo-grid .thumb:hover .thumb-overlay,
.photo-grid .thumb:focus-visible .thumb-overlay {
  opacity: 1;
}
.photo-open {
  background: transparent;
  border: none;
  padding: 0;
  width: 100%;
  display: block;
  border-radius: 12px;
}
.photo-open:hover,
.photo-open:focus {
  background: transparent;
  outline: none;
}

/* -------------------------
   Filter pills
-------------------------- */
.filter-banner {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  margin: 8px 0 14px;
}
.pill {
  display: inline-flex;
  align-items: center;
  padding: 4px 8px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--card), var(--bg) 25%);
  border: 1px solid var(--btn-border);
  font-size: 13px;
}
.pill-overdue, .pill.overdue, .pill.critical, .pill-danger { background: #3a1317; color: #ffb4b8; border-color: #ff6b6b; }
.pill-critical, .pill.hot, .pill.hot { background: #3a2013; color: #ffc9a1; border-color: #ffa94d; }
.pill-soon, .pill.soon { background: #332011; color: #ffd8a8; border-color: #ffa94d; }
.pill-watch, .pill.watch { background: #1f2f26; color: #b8f2d5; border-color: #63e6be; }
.pill-ok, .pill.ok { background: #1f2633; color: #c4d7ff; border-color: #74c0fc; }
.pill-reset {
  margin-left: auto;
  border-radius: 999px;
  padding: 6px 10px;
}

/* -------------------------
   Modal (dialog)
-------------------------- */
dialog#app-modal {
  border: none;
  padding: 16px;
  background: transparent;
  color: var(--text);
  width: auto;
  max-width: 100vw;
  max-height: 100vh;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  overflow: auto;
}
dialog#app-modal:not([open]) {
  display: none; /* Hide dialog contents on browsers without native dialog support */
}
dialog#app-modal::backdrop {
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* === OUTER modal panel (actual dialog shell) === */
#app-modal-body > .modal-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);

  /* ðŸ”¥ Generous padding so content/buttons donâ€™t touch the edge */
  padding: 28px 28px 24px;

  width: min(96vw, 760px);
  max-height: calc(100vh - 64px);
  overflow: auto;
  position: relative;
}

/* === INNER .modal-card (from edit_form.html) ===
   Prevent the â€œcard inside a cardâ€ / extra tight padding */
#app-modal-body .modal-card .modal-card {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
}

/* If your HTML wrapper is #app-modal-body, keep padding off here,
   because the outer .modal-card provides it */
#app-modal-body { padding: 0; }

/* Close button (reuse btn classes but adjust position) */
#app-modal form#app-modal-close {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 10;
}
#app-modal form#app-modal-close > button[value="close"] {
  padding: 4px 8px;
  font-size: 12px;
}

/* forms inside modal */
#app-modal-body .form-grid {
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}
#app-modal-body .field--full { grid-column: 1 / -1; }

/* -------------------------
   Admin page
-------------------------- */

.admin-card {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* 3 responsive columns on desktop */
.admin-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 16px;
}

/* Stack sections on smaller screens */
@media (max-width: 960px) {
  .admin-grid {
    grid-template-columns: 1fr;
  }
}

.admin-section {
  border-radius: var(--radius);
  border: 1px solid var(--border);
  padding: 12px 12px 10px;
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.admin-section-header h2 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
}

.admin-section-header p,
.admin-section-help {
  margin: 6px 0 0;
  font-size: 12px;
  color: var(--muted);
}

.admin-section[data-collapsed="1"] > :not(.admin-section-header) {
  display: none;
}
.collapse-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 0;
  width: 32px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 15px;
  line-height: 1;
  color: var(--accent);
  background: transparent;
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  cursor: pointer;
}

.collapse-toggle::after {
  content: attr(data-icon);
}

/* Add-row inline form */
.admin-inline-form {
  display: flex;
  gap: 8px;
}

.admin-inline-form .input {
  flex: 1 1 auto;
}

/* List of existing values */
.admin-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.admin-list-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.02);
}

.admin-list-name {
  font-size: 13px;
}

.admin-empty {
  font-size: 12px;
  padding: 4px 2px;
}

.admin-list-row form {
  margin: 0;
}
.bordered-row {
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--card);
}

.quick-filters {
  margin: 12px 0;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
  flex: 1 1 220px;
}
.chip-label {
  font-size: 12px;
  color: var(--muted);
}
.chip {
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  border-radius: 14px;
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  border: 1px solid var(--border);
  color: var(--text);
  text-decoration: none;
  font-size: 12px;
}
.chip:hover {
  border-color: color-mix(in oklab, var(--accent), #fff 12%);
}
.chip-active {
  background: color-mix(in oklab, var(--accent), var(--bg) 25%);
  border-color: var(--accent);
  color: var(--bg);
}
.chip-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  padding: 0 6px;
  margin-left: 6px;
  border-radius: 999px;
  background: var(--accent-soft);
  color: var(--text);
  font-size: 11px;
  line-height: 1.2;
}

.quick-filters.row {
  flex-direction: row;
  align-items: flex-start;
}

.pagination {
  margin: 12px 0 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}
.pagination-info {
  font-size: 12px;
  color: var(--muted);
}
.pagination-controls {
  display: inline-flex;
  gap: 8px;
}

/* Admin columns (drag + toggle) */
.admin-columns {
  padding: 12px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--border), transparent 60%);
}
.admin-sortable-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 10px;
}
.admin-sortable-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid color-mix(in oklab, var(--border), #fff 12%);
  border-radius: 12px;
  background: var(--card);
  box-shadow: 0 6px 14px color-mix(in oklab, var(--shadow), transparent 55%);
  transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
}
.admin-sortable-row:hover {
  border-color: color-mix(in oklab, var(--accent), #fff 18%);
  transform: translateY(-1px);
}
.admin-sortable-row.dragging {
  opacity: 0.6;
  transform: scale(0.99);
}
.drag-handle {
  border: none;
  background: transparent;
  color: var(--text);
  height: 36px;
  width: 36px;
  cursor: grab;
  font-size: 18px;
  line-height: 1;
}
.drag-handle:active { cursor: grabbing; }
.admin-column-label {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.admin-column-title {
  font-weight: 600;
  color: var(--text);
}
.admin-column-sub {
  font-size: 12px;
  color: var(--muted);
}
.admin-save-status {
  min-height: 16px;
  font-size: 12px;
  color: var(--muted);
}
.admin-save-status.saving {
  color: var(--link);
}
.switch {
  position: relative;
  display: inline-block;
  width: 52px;
  height: 28px;
}
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: var(--btn-bg);
  border-radius: 999px;
  transition: background 0.2s ease, box-shadow 0.2s ease;
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--border), #fff 10%);
}
.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 5px;
  top: 5px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s ease;
}
.switch input:checked + .slider {
  background: color-mix(in oklab, var(--accent), #fff 10%);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--accent), #000 10%);
}
.switch input:checked + .slider:before {
  transform: translateX(22px);
}

/* Required list alignment (no drag handle) */
.admin-required-list .admin-sortable-row {
  grid-template-columns: 1fr auto;
  padding-left: 14px;
}

/* File input styling */
.file-input {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border: 1px dashed color-mix(in oklab, var(--border), #fff 6%);
  border-radius: 12px;
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  cursor: pointer;
  position: relative;
}
.file-input input[type="file"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}
.file-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  border-radius: 10px;
  color: var(--text);
  font-size: 13px;
}
.file-name {
  font-size: 12px;
  color: var(--muted);
}

.admin-radio {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
  cursor: pointer;
  user-select: none;
}
.admin-radio input {
  accent-color: var(--accent);
}
.admin-radio:hover {
  border-color: color-mix(in oklab, var(--accent), #fff 10%);
}

.qty-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.qty-inline form {
  display: inline;
}
.qty-inline .qty-value {
  min-width: 24px;
  text-align: center;
  display: inline-block;
}

.required-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 8px;
  background: color-mix(in oklab, var(--accent), transparent 80%);
  color: var(--text);
  font-size: 10px;
  letter-spacing: 0.04em;
}

.theme-switch-row {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}
.theme-label {
  font-size: 12px;
  color: var(--muted);
}
.theme-switch {
  transform: scale(1.05);
}

/* -------------------------
   Utilities
-------------------------- */
@media (max-width: 960px) {
  .form-grid,
  .detail-grid {
    grid-template-columns: 1fr;
  }
  .table { min-width: 0; }
  .page-header {
    flex-direction: column;
    align-items: flex-start;
  }
  .page-header-actions {
    justify-content: flex-start;
  }
}

@media (max-width: 720px) {
  dialog#app-modal { padding: 10px; }
  #app-modal-body > .modal-card {
    width: 100%;
    max-height: calc(100vh - 32px);
  }
  #app-modal-body .form-grid { grid-template-columns: 1fr; }
}

.hidden { display: none !important; }
.wrap { white-space: pre-wrap; word-wrap: break-word; }

th.sortable {
  cursor: pointer;
}

th.sortable:hover {
  background-color: rgba(0, 0, 0, 0.04);
}

/* Generic dialog fallback (for browsers without native <dialog>) */
dialog.modal-card {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--card);
  color: var(--text);
  box-shadow: 0 18px 40px rgba(0,0,0,0.18);
  max-width: 400px;
  width: clamp(280px, 80vw, 400px);
  padding: 16px;
}
dialog.modal-card[open] {
  display: block;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
}
dialog.modal-card::backdrop {
  background: rgba(0, 0, 0, 0.4);
}

#deplete-dialog {
  margin: 0;
  padding: 16px;
  max-width: 420px;
  width: clamp(280px, 80vw, 420px);
}
#deplete-dialog[open] {
  display: block;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Reports bucket overlay */
.bucket-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 16px;
  z-index: 1000;
}
.bucket-overlay.open {
  display: flex;
}
.bucket-dialog {
  margin: 0;
  padding: 18px;
  width: 95vw;
  max-width: 1400px;
  max-height: 85vh;
  overflow: hidden;
  background: color-mix(in oklab, var(--card), rgba(0,0,0,0.35) 30%);
  border: 1px solid color-mix(in oklab, var(--border), #ffffff 6%);
  box-shadow: 0 24px 70px rgba(0,0,0,0.45);
  border-radius: 14px;
}

th.sortable {
  cursor: pointer;
  position: relative;
  padding-right: 18px;
}

th.sortable .sort-arrow {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 12px;
  opacity: 0.6;
}

/* --- Search + filters layout --- */

form.search-and-filters {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 10px;
}

/* Top search bar row */
form.search-and-filters {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  box-shadow: var(--shadow);
}
form.search-and-filters .search-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 8px;
  align-items: center;
}

form.search-and-filters .filters-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 8px 12px;
}

form.search-and-filters .filter-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 0.9rem;
}

form.search-and-filters .filter-group label {
  opacity: 0.8;
  color: var(--muted);
}

form.search-and-filters .filter-input {
  width: 100%;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--input-text);
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 0.95rem;
  outline: none;
}

form.search-and-filters .filter-input::placeholder {
  color: color-mix(in oklab, var(--muted), #fff 10%);
}

form.search-and-filters .filter-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent-soft);
}

/* Actions row */
form.search-and-filters .filters-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 2px;
}

.filter-toggle-row {
  display: flex;
  justify-content: flex-end;
  margin: 8px 0 4px;
}

.search-and-filters.collapsed {
  display: none;
}

/* Apply filters button */
form.search-and-filters .btn-primary {
  border-radius: 10px;
  padding: 8px 14px;
  font-size: 0.95rem;
  font-weight: 600;
  border: 1px solid var(--accent);
  cursor: pointer;
  background: var(--accent);
  color: #0e0e10;
}

form.search-and-filters .btn-primary:hover {
  background: color-mix(in oklab, var(--accent), white 8%);
}

/* Clear button (outlined pill) */
form.search-and-filters .btn-clear-filters {
  border-radius: 10px;
  padding: 7px 12px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  text-decoration: none;
}

form.search-and-filters .btn-clear-filters:hover {
  border-color: var(--accent);
}

/* -------------------------
   Reports page
-------------------------- */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
  margin: 12px 0 18px;
}
.reports-filters {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: flex-end;
  margin: 0 0 10px;
}
.kpi-card {
  border: 1px solid var(--btn-border);
  border-radius: var(--radius);
  padding: 12px;
  background: color-mix(in oklab, var(--card), var(--bg) 12%);
}
.kpi-card .kpi-label {
  font-size: 12px;
  color: var(--muted);
}
.kpi-card .kpi-value {
  font-size: 26px;
  font-weight: 700;
}
.kpi-card.danger { border-color: #ff6b6b; }
.kpi-card.hot { border-color: #ffa94d; }
.kpi-card.warn { border-color: #ffd43b; }
.kpi-card.soon { border-color: #ffc078; }
.kpi-card.calm { border-color: #63e6be; }
.kpi-card.neutral { border-color: var(--btn-border); }

.reports-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 16px;
}
.report-card {
  border: 1px solid var(--btn-border);
  border-radius: var(--radius);
  padding: 12px;
  background: color-mix(in oklab, var(--card), var(--bg) 8%);
}
.report-head h3 {
  margin: 0;
  font-size: 15px;
}
.report-head .muted { margin: 2px 0 6px; }
.report-list { display: flex; flex-direction: column; gap: 10px; }
.report-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border: 1px solid var(--btn-border);
  border-radius: 12px;
  background: color-mix(in oklab, var(--card), var(--bg) 10%);
}
.report-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
}
.report-sub { color: var(--muted); font-size: 12px; }
.report-meta { text-align: right; font-size: 13px; }
.kpi-large {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.kpi-large .kpi-value { font-size: 34px; font-weight: 800; }
.kpi-large .kpi-label { color: var(--muted); }
.bar-chart { display: flex; flex-direction: column; gap: 8px; margin-top: 6px; }
.bar {
  display: grid;
  grid-template-columns: 80px 1fr 40px;
  align-items: center;
  gap: 8px;
}
.bar-label { color: var(--muted); font-size: 12px; }
.bar-track {
  height: 8px;
  background: color-mix(in oklab, var(--card), var(--bg) 25%);
  border-radius: 999px;
  overflow: hidden;
}
.bar-fill {
  display: block;
  height: 100%;
  background: linear-gradient(90deg, #ff8a5c, #ffd43b);
}
.bar-value { text-align: right; font-weight: 600; }
.heatmap { display: flex; flex-direction: column; gap: 10px; }
.heat-row {
  border: 1px solid var(--btn-border);
  border-radius: 12px;
  padding: 10px;
  background: color-mix(in oklab, var(--card), var(--bg) 6%);
}
.heat-cat { font-weight: 700; margin-bottom: 6px; }
.heat-cells { display: flex; flex-wrap: wrap; gap: 8px; }
.heat-cell {
  min-width: 120px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid var(--btn-border);
  background: color-mix(in oklab, var(--card), var(--bg) 10%);
}
.heat-loc { font-size: 12px; color: var(--muted); }
.heat-val { font-weight: 700; }

.alert-expiry {
  margin-bottom: 12px;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--btn-border);
  display: flex;
  align-items: center;
  gap: 10px;
}
.alert-expiry.ok {
  border-color: #63e6be;
  background: color-mix(in oklab, #2f9e44 28%, var(--card) 72%);
}
.alert-expiry.warn {
  border-color: #ffa94d;
  background: color-mix(in oklab, #f08c00 26%, var(--card) 74%);
}
.alert-expiry.danger {
  border-color: #ff6b6b;
  background: color-mix(in oklab, #fa5252 28%, var(--card) 72%);
}
